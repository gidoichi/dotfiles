- defaults:
    link:
      create: true
      relink: true

- link:
    ~/.config/terminology/config:
      if: '[ "$(uname)" = Linux ] && [ -z "${WSL_DISTRO_NAME}" ]'
      path: terminology/config
    ~/:
      glob: true
      path: dotconf/*
      prefix: '.'

- shell:
  - [git submodule update --init --recursive, Installing submodules]

- link:
    ~/Library/Application Support/KeePassXC/keepassxc.ini:
      if: '[ "$(uname)" = Darwin ]'
    ~/.config/keepassxc/keepassxc.ini:
      if: '[ "$(uname)" = Linux ] && [ -z "${WSL_DISTRO_NAME}" ]'
  shell:
  - |
    if [ -n "${WSL_DISTRO_NAME}" ]; then
      echo cp "keepassxc.ini" "$(wslpath "$(powershell.exe -Command Write-Host '$env:APPDATA')")/KeePassXC/keepassxc.ini" || true
    fi
